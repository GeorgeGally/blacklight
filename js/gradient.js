$(function(){function a(a){return rgb=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),rgb?("0"+parseInt(rgb[1],10).toString(16)).slice(-2)+("0"+parseInt(rgb[2],10).toString(16)).slice(-2)+("0"+parseInt(rgb[3],10).toString(16)).slice(-2):a.slice(1)}function b(a){var b=document,c=b.getElementById(a);if(b.body.createTextRange){var d=document.body.createTextRange();d.moveToElementText(c),d.select()}else if(window.getSelection){var e=window.getSelection(),d=document.createRange();d.selectNodeContents(c),e.removeAllRanges(),e.addRange(d)}}function c(a){return parseInt(a.substring(0,2),16)}function d(a){return parseInt(a.substring(2,4),16)}function e(a){return parseInt(a.substring(4,6),16)}function f(a){return a=parseInt(a,10),isNaN(a)?"00":(a=Math.max(0,Math.min(a,255)),"0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16))}function g(a){return a=a/100*255,a=parseInt(a,10),isNaN(a)?"00":(a=Math.max(0,Math.min(a,255)),"0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16))}function h(a,b,c){return f(a)+f(b)+f(c)}function i(a){return"string"==typeof a&&a.indexOf(".")!=-1&&1===parseFloat(a)}function j(a){return"string"==typeof a&&a.indexOf("%")!=-1}function k(a,b){i(a)&&(a="100%");var c=j(a);return a=fa(b,ga(0,parseFloat(a))),c&&(a=parseInt(a*b)/100),ea.abs(a-b)<1e-6?1:a%b/parseFloat(b)}function m(a,b,c){var d,e,f;a=6*k(a,360),b=k(b,100),c=k(c,100);var g=ea.floor(a),h=a-g,i=c*(1-b),j=c*(1-h*b),l=c*(1-(1-h)*b),m=g%6,d=[c,j,i,i,l,c][m],e=[l,c,c,j,i,i][m],f=[i,i,l,c,c,j][m];return[255*d,255*e,255*f]}function n(a,b,c){a/=255,b/=255,c/=255;var d,e,f=Math.max(a,b,c),g=Math.min(a,b,c),h=f,i=f-g;if(e=0==f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(b<c?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return[d,e,h]}function o(a,b,c){for(Z=Math.max(a,b,c);Z<255;)a++,b++,c++,Z++;return h(a,b,c)}function q(a,b){for(V=0;V<a.length;V++)if(a[V][0]==b)return P=V,!0;return!1}function r(){hue=ba.val(),sat=ca.val(),lum=da.val(),""==hue&&(hue=0),""==sat&&(sat=0),""==lum&&(lum=0),rgb=m(hue,sat,lum),rgb[0]=Math.round(rgb[0]),rgb[1]=Math.round(rgb[1]),rgb[2]=Math.round(rgb[2]),$("#c_red").val(rgb[0]),$("#c_green").val(rgb[1]),$("#c_blue").val(rgb[2]),hex=h(rgb[0],rgb[1],rgb[2]),$("#c_hex").val(hex),max_bright="#"+o(rgb[0],rgb[1],rgb[2]),$("#v_col").css("background-color",max_bright),$("#col").css("background-color","#"+hex),ja[la][1]=hex,z(),I(),A(),F()}function s(){W=$("#c_red").val(),X=$("#c_green").val(),Y=$("#c_blue").val(),""==W&&(W=0),""==X&&(X=0),""==Y&&(Y=0),hex=h(W,X,Y),hsb=n(W,X,Y),M=Math.round(360*hsb[0]),N=Math.round(100*hsb[1]),O=Math.round(100*hsb[2]),ba.val(M),ca.val(N),da.val(O),$("#c_hex").val(hex),max_bright="#"+o(W,X,Y),$("#v_col").css("background-color",max_bright),$("#col").css("background-color","#"+hex),ja[la][1]=hex,ya=oa.offset(),Ca.l=ya.left+Math.round(256*hsb[0])-7,Ca.t=ya.top+(256-Math.round(256*hsb[1])-7),$(sa.elem).offset({left:Ca.l,top:Ca.t}),za=qa.offset(),Da.t=za.top+Math.abs(Math.round(256*hsb[2])-256)-5,$(ta.elem).offset({top:Da.t}),z(),I(),A(),F()}function t(){hue=ba.val(),sat=ca.val(),lum=da.val(),""==hue&&(hue=0),""==sat&&(sat=0),""==lum&&(lum=0),rgb=m(hue,sat,lum),rgb[0]=Math.round(rgb[0]),rgb[1]=Math.round(rgb[1]),rgb[2]=Math.round(rgb[2]),$("#c_red").val(rgb[0]),$("#c_green").val(rgb[1]),$("#c_blue").val(rgb[2]),hex=h(rgb[0],rgb[1],rgb[2]),$("#c_hex").val(hex),max_bright="#"+o(rgb[0],rgb[1],rgb[2]),$("#v_col").css("background-color",max_bright),$("#col").css("background-color","#"+hex),ja[la][1]=hex,z(),I(),A(),F()}function u(a){a=Math.round(256*a/360),ya=oa.offset(),Ca.l=ya.left+a-7,$(sa.elem).offset({left:Ca.l})}function v(a){a=Math.round(256*a/100),ya=oa.offset(),Ca.t=ya.top+(256-a-7),$(sa.elem).offset({top:Ca.t})}function w(a){a=Math.round(256-256*a/100-5),za=$("#v_col").offset(),Da.t=za.top+a,$(ta.elem).offset({top:Da.t})}function x(a){W=c(a),X=d(a),Y=e(a),hsb=n(W,X,Y),$("#col").css("background-color","#"+a),$("#c_red").val(W),$("#c_green").val(X),$("#c_blue").val(Y),ba.val(Math.round(360*hsb[0])),ca.val(Math.round(100*hsb[1])),da.val(Math.round(100*hsb[2])),$("#c_hex").val(a),max_bright="#"+o(W,X,Y),$("#v_col").css("background-color",max_bright),ya=oa.offset(),Ca.l=ya.left+Math.round(256*hsb[0])-7,Ca.t=ya.top+(256-Math.round(256*hsb[1])-7),$(sa.elem).offset({left:Ca.l,top:Ca.t}),za=qa.offset(),Da.t=za.top+Math.abs(Math.round(256*hsb[2])-256)-5,$(ta.elem).offset({top:Da.t})}function y(){for(R=ia.length,$(".cs_tpt").remove(),U=0;U<R;U++)ka==U?($("#t_loc").val(ia[U][0]),$("#t_alpha").val(ia[U][1]),P=4.5*ia[U][0]-5,opacity=ia[U][1]/100,addelement="<div class='cs_tpt active' style='left:"+P+"px' ><div style='background-color:black;opacity:"+opacity+";filter:alpha(opacity="+ia[U][1]+")'></div></div>"):(P=4.5*ia[U][0]-5,opacity=ia[U][1]/100,addelement="<div class='cs_tpt' style='left:"+P+"px' ><div style='background-color:black;opacity:"+opacity+";filter:alpha(opacity="+ia[U][1]+")'></div></div>"),$(".cs_t").append(addelement)}function z(){for(S=ja.length,$(".cs_bpt").remove(),U=0;U<S;U++)U==la?($("#b_loc").val(ja[U][0]),$("#b_col").val("#"+ja[U][1]),P=4.5*ja[U][0]-5,addelement="<div class='cs_bpt active' style='left:"+P+"px' ><div style='background-color:#"+ja[U][1]+"'></div></div>"):(P=4.5*ja[U][0]-5,addelement="<div class='cs_bpt' style='left:"+P+"px' ><div style='background-color:#"+ja[U][1]+"'></div></div>"),$(".cs_b").append(addelement)}function A(){len=ha.length;var a="",b="",f="";for(U=0;U<len;U++)alpha=ha[U][2]/100,rgba="rgba("+c(ha[U][1])+","+d(ha[U][1])+","+e(ha[U][1])+","+alpha+")",0==U?(ie_hex_first=ha[U][1],b+="color-stop("+ha[U][0]+"%, "+rgba+")",f+="color-stop("+(100-ha[U][0])+"%, "+rgba+")",a+=rgba+" "+ha[U][0]+"%"):(b+=", color-stop("+ha[U][0]+"%, "+rgba+")",f="color-stop("+(100-ha[U][0])+"%, "+rgba+"), "+f,a+=", "+rgba+" "+ha[U][0]+"%");ie_hex_last=ha[len-1][1],"l"==ma?$.browser.msie?(degree_pos=Math.round(na/90),0==degree_pos?ie_old="startColorstr='#"+ie_hex_first+"', endColorstr='#"+ie_hex_last+"'":1==degree_pos?ie_old="startColorstr='#"+ie_hex_last+"', endColorstr='#"+ie_hex_first+"'":2==degree_pos?ie_old="startColorstr='#"+ie_hex_last+"', endColorstr='#"+ie_hex_first+"'":3==degree_pos?ie_old="startColorstr='#"+ie_hex_first+"', endColorstr='#"+ie_hex_last+"'":ie_old="startColorstr='#"+ie_hex_first+"', endColorstr='#"+ie_hex_last+"'",$("#s_bg div").css({background:"-ms-linear-gradient(left, "+a+")",filter:"progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+ie_hex_first+"',   endColorstr='#"+ie_hex_last+"',GradientType=1 )"}),$("#p_col div").css({background:"-ms-linear-gradient("+na+"deg, "+a+")",filter:"progid:DXImageTransform.Microsoft.gradient( "+ie_old+",GradientType="+ie_degree+")"})):$.browser.safari||$.browser.chrome?(degree_pos=Math.round(na/45),0==degree_pos?old_webkit_rgba="left top, right top, "+b:1==degree_pos?old_webkit_rgba="left bottom, right top, "+b:2==degree_pos?old_webkit_rgba="left top, left bottom, "+f:3==degree_pos?old_webkit_rgba="left top, right bottom, "+f:4==degree_pos?old_webkit_rgba="left top, right top, "+f:5==degree_pos?old_webkit_rgba="left bottom, right top, "+f:6==degree_pos?old_webkit_rgba="left top, left bottom, "+b:7==degree_pos?old_webkit_rgba="left top, right bottom, "+b:old_webkit_rgba="left top, right top, "+b,$("#s_bg div").css({background:"-webkit-gradient(linear, "+old_webkit_rgba+")",background:"-webkit-linear-gradient(left, "+a+")"}),$("#p_col div").css({background:"-webkit-gradient(linear, left top, right top,"+b+")",background:"-webkit-linear-gradient("+na+"deg, "+a+")"})):$.browser.mozilla?($("#s_bg div").css({background:"-moz-linear-gradient(left, "+a+")"}),$("#p_col div").css({background:"-moz-linear-gradient("+na+"deg, "+a+")"})):$.browser.opera?($("#s_bg div").css({background:"-o-linear-gradient(left, "+a+")"}),$("#p_col div").css({background:"-o-linear-gradient("+na+"deg, "+a+")"})):($("#s_bg div").css({background:"linear-gradient(to right, "+a+")"}),$("#p_col div").css({background:"linear-gradient("+na+"deg, "+a+")"})):$.browser.msie?($("#s_bg div").css({background:"-ms-linear-gradient(left, "+a+")",filter:"progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+ie_hex_first+"',   endColorstr='#"+ie_hex_last+"',GradientType=1 )"}),$("#p_col div").css({background:"-ms-radial-gradient(center, ellipse cover, "+a+")",filter:"progid:DXImageTransform.Microsoft.gradient( startColorstr='#"+ie_hex_first+"',   endColorstr='#"+ie_hex_last+"',GradientType="+ie_degree+" )"})):$.browser.safari||$.browser.chrome?($("#s_bg div").css({background:"-webkit-gradient(linear, left top, right top,"+b+")",background:"-webkit-linear-gradient(left, "+a+")"}),$("#p_col div").css({background:"-webkit-gradient(radial, center center, 0px, center center, 100%,"+b+")",background:"-webkit-radial-gradient(center, ellipse cover, "+a+")"})):$.browser.mozilla?($("#s_bg div").css({background:"-moz-linear-gradient(left, "+a+")"}),$("#p_col div").css({background:"-moz-radial-gradient(center, ellipse cover, "+a+")"})):$.browser.opera?($("#s_bg div").css({background:"-o-linear-gradient(left, "+a+")"}),$("#p_col div").css({background:"-o-radial-gradient(center, ellipse cover, "+a+")"})):($("#s_bg div").css({background:"linear-gradient(to right, "+a+")"}),$("#p_col div").css({background:"radial-gradient(ellipse at center, "+a+")"}))}function B(a){var b=new Number(a+"").toFixed(parseInt(2));return parseFloat(b)}function C(a,b){var c=scaleY=1,d=invScaleY=1,e=a/Math.sqrt(2),f=b/Math.sqrt(2),g=a/2,h=b/2;return e=0==e?.25:e,f=0==f?.25:f,e>=f?(c=1,d=1,scaleY=f/e,invScaleY=e/f,{a:g,b:B(h*invScaleY),c:0,d:B(g),e:B(h*invScaleY),f:B(e),g:c,h:scaleY,i:B(a*d),j:B(b*invScaleY)}):(scaleY=1,invScaleY=1,c=e/f,d=f/e,{a:g*d,b:h,c:0,d:g*d,e:h,f:f,g:c,h:scaleY,i:a*d,j:b*invScaleY})}function D(a,b,c){var d,e,f,g,h=Math.atan(b/a),i=a/2,j=b/2;c=Math.abs((360-c)*(Math.PI/180));var k=Math.abs(c-Math.PI)<h,l=c>2*Math.PI-h||c<h,m=Math.abs(c-Math.PI/2)<=Math.abs(Math.PI/2-h),n=Math.abs(c-3*Math.PI/2)<=Math.abs(Math.PI/2-h),o=(k?-1:0)+(l?1:0),p=(n?-1:0)+(m?1:0);return o?(d=i+a/2*o,e=j+a/2*(Math.tan(c)*o)):(d=i+b/2*(p/Math.tan(c)),e=j+b/2*p),d=Math.round(d),e=Math.round(e),f=a-d,g=b-e,{x0:f,y0:g,x1:d,y1:e}}function E(a){var b=ha.length;for(U=0;U<b;U++)a+=0==U?"<span>"+U+" => <span class='r'>array</span>(</span><br/><span>'position' => <span class='g'>'"+ha[U][0]+"'</span>,</span><br/><span>'rgba' => <span class='g'>'rgba("+c(ha[U][1])+","+d(ha[U][1])+","+e(ha[U][1])+","+ha[U][2]/100+")'</span></span><br/><span>)<span>":",<br/><span>"+U+" => <span class='r'>array</span>(</span><br/><span>'position' => <span class='g'>'"+ha[U][0]+"'</span>,</span><br/><span>'rgba' => <span class='g'>'rgba("+c(ha[U][1])+","+d(ha[U][1])+","+e(ha[U][1])+","+ha[U][2]/100+")'</span></span><br/><span>)<span>";return a}function F(){if(len=ha.length,"rgba"==_){var a="",b="",f="";for(U=0;U<len;U++)rgba="rgba("+c(ha[U][1])+","+d(ha[U][1])+","+e(ha[U][1])+","+ha[U][2]/100+")",0==U?(ie_hex_first=ha[U][1],b+="color-stop("+ha[U][0]+"%, "+rgba+")",f+="color-stop("+(100-ha[U][0])+"%, "+rgba+")",a+=rgba+" "+ha[U][0]+"%"):(b+=", color-stop("+ha[U][0]+"%, "+rgba+")",f="color-stop("+(100-ha[U][0])+"%, "+rgba+"), "+f,a+=", "+rgba+" "+ha[U][0]+"%");ie_hex_last=ha[len-1][1],"l"==ma?(degree_pos=Math.round(na/90),0==degree_pos?ie_old="startColorstr='#"+ie_hex_first+"', endColorstr='#"+ie_hex_last+"'":1==degree_pos?ie_old="startColorstr='#"+ie_hex_last+"', endColorstr='#"+ie_hex_first+"'":2==degree_pos?ie_old="startColorstr='#"+ie_hex_last+"', endColorstr='#"+ie_hex_first+"'":3==degree_pos?ie_old="startColorstr='#"+ie_hex_first+"', endColorstr='#"+ie_hex_last+"'":ie_old="startColorstr='#"+ie_hex_first+"', endColorstr='#"+ie_hex_last+"'",degree_pos=Math.round(na/45),0==degree_pos?old_webkit_rgba="left top, right top, "+b:1==degree_pos?old_webkit_rgba="left bottom, right top, "+b:2==degree_pos?old_webkit_rgba="left top, left bottom, "+f:3==degree_pos?old_webkit_rgba="left top, right bottom, "+f:4==degree_pos?old_webkit_rgba="left top, right top, "+f:5==degree_pos?old_webkit_rgba="left bottom, right top, "+f:6==degree_pos?old_webkit_rgba="left top, left bottom, "+b:7==degree_pos?old_webkit_rgba="left top, right bottom, "+b:old_webkit_rgba="left top, right top, "+b,w3cdeg=Math.abs(na-450)%360,_css_rgba="<div> <span class='b'>background</span>: <span class='r'>-moz-linear-gradient</span>("+na+"deg, "+a+"); <span class='cm'>/* ff3.6+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-webkit-gradient</span>(linear, "+old_webkit_rgba+"); <span class='cm'>/* safari4+,chrome */</span> </div><div> <span class='b'>background</span>: <span class='r'>-webkit-linear-gradient</span>("+na+"deg, "+a+"); <span class='cm'>/* safari5.1+,chrome10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-o-linear-gradient</span>("+na+"deg, "+a+"); <span class='cm'>/* opera 11.10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-ms-linear-gradient</span>("+na+"deg, "+a+"); <span class='cm'>/* ie10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>linear-gradient</span>("+w3cdeg+"deg, "+a+"); <span class='cm'>/* w3c */</span> </div><div><span class='b'>filter</span>: <span class='r'>progid:DXImageTransform.Microsoft.gradient</span>( "+ie_old+",GradientType="+ie_degree+" ); <span class='cm'>/* ie6-9 */</span> </div>"):_css_rgba="<div> <span class='b'>background</span>: <span class='r'>-moz-radial-gradient</span>(center, ellipse cover, "+a+");  <span class='cm'>/* ff3.6+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-webkit-gradient</span>(radial, center center, 0px, center center, 100%, "+b+");  <span class='cm'>/* safari4+,chrome */</span> </div><div> <span class='b'>background</span>:<span class='r'>-webkit-radial-gradient</span>(center, ellipse cover, "+a+");  <span class='cm'>/* safari5.1+,chrome10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-o-radial-gradient</span>(center, ellipse cover, "+a+");  <span class='cm'>/* opera 11.10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-ms-radial-gradient</span>(center, ellipse cover, "+a+");  <span class='cm'>/* ie10+ */</span> </div><div> <span class='b'>background</span>:<span class='r'>radial-gradient</span>(ellipse at center, "+a+");  <span class='cm'>/* w3c */</span> </div><div> <span class='b'>filter</span>: <span class='r'>progid:DXImageTransform.Microsoft.gradient</span>( startColorstr='#"+ie_hex_first+"', endColorstr='#"+ie_hex_last+"',GradientType="+ie_degree+" );  <span class='cm'>/* ie6-9 */</span> </div>",aa.html(_css_rgba)}else if("scss"==_){var a="",b="",f="";for(U=0;U<len;U++)rgba="rgba("+c(ha[U][1])+","+d(ha[U][1])+","+e(ha[U][1])+","+ha[U][2]/100+")",0==U?(ie_hex_first=ha[U][1],a+=rgba+" "+ha[U][0]+"%"):a+=", "+rgba+" "+ha[U][0]+"%";ie_hex_last=ha[len-1][1],"l"==ma?(degree_pos=Math.round(na/90),0==degree_pos?ie_old="#"+ie_hex_first+", #"+ie_hex_last:1==degree_pos?ie_old="#"+ie_hex_last+", #"+ie_hex_first:2==degree_pos?ie_old="#"+ie_hex_last+", #"+ie_hex_first:3==degree_pos?ie_old="#"+ie_hex_first+", #"+ie_hex_last:ie_old="#"+ie_hex_first+", #"+ie_hex_last,w3cdeg=Math.abs(na-450)%360,_css_scss="<div> <span class='b'>background</span>: <span class='r'>-moz-linear-gradient</span>("+na+"deg, "+a+"); <span class='cm'>/* ff3.6+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-webkit-gradient</span>(linear, ); <span class='cm'>/* safari4+,chrome */</span> </div><div> <span class='b'>background</span>: <span class='r'>-webkit-linear-gradient</span>("+na+"deg, "+a+"); <span class='cm'>/* safari5.1+,chrome10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-o-linear-gradient</span>("+na+"deg, "+a+"); <span class='cm'>/* opera 11.10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-ms-linear-gradient</span>("+na+"deg, "+a+"); <span class='cm'>/* ie10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>linear-gradient</span>("+w3cdeg+"deg, "+a+"); <span class='cm'>/* w3c */</span> </div><div><span class='b'>filter</span>: <span class='r'>progid:DXImageTransform.Microsoft.gradient</span>( "+ie_old+",GradientType="+ie_degree+" ); <span class='cm'>/* ie6-9 */</span> </div>"):_css_scss="<div> <span class='b'>background</span>: <span class='r'>-moz-radial-gradient</span>(center, ellipse cover, "+a+");  <span class='cm'>/* ff3.6+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-webkit-gradient</span>(radial, center center, 0px, center center, 100%, "+b+");  <span class='cm'>/* safari4+,chrome */</span> </div><div> <span class='b'>background</span>:<span class='r'>-webkit-radial-gradient</span>(center, ellipse cover, "+a+");  <span class='cm'>/* safari5.1+,chrome10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-o-radial-gradient</span>(center, ellipse cover, "+a+");  <span class='cm'>/* opera 11.10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-ms-radial-gradient</span>(center, ellipse cover, "+a+");  <span class='cm'>/* ie10+ */</span> </div><div> <span class='b'>background</span>:<span class='r'>radial-gradient</span>(ellipse at center, "+a+");  <span class='cm'>/* w3c */</span> </div><div> <span class='b'>filter</span>: <span class='r'>progid:DXImageTransform.Microsoft.gradient</span>( startColorstr='#"+ie_hex_first+"', endColorstr='#"+ie_hex_last+"',GradientType="+ie_degree+" );  <span class='cm'>/* ie6-9 */</span> </div>",aa.html(_css_scss)}else if("hex"==_){var h="",i="",j="";for(U=0;U<len;U++)0==U?(ie_hex_first=ha[U][1],i+="color-stop("+ha[U][0]+"%, #"+ha[U][1]+")",j+="color-stop("+(100-ha[U][0])+"%, #"+ha[U][1]+")",h+="#"+ha[U][1]+" "+ha[U][0]+"%"):(i+=", color-stop("+ha[U][0]+"%, #"+ha[U][1]+")",j="color-stop("+(100-ha[U][0])+"%, #"+ha[U][1]+"), "+j,h+=", #"+ha[U][1]+" "+ha[U][0]+"%");ie_hex_last=ha[len-1][1],"l"==ma?(degree_pos=Math.round(na/90),0==degree_pos?ie_old="startColorstr='#"+ie_hex_first+"', endColorstr='#"+ie_hex_last+"'":1==degree_pos?ie_old="startColorstr='#"+ie_hex_last+"', endColorstr='#"+ie_hex_first+"'":2==degree_pos?ie_old="startColorstr='#"+ie_hex_last+"', endColorstr='#"+ie_hex_first+"'":3==degree_pos?ie_old="startColorstr='#"+ie_hex_first+"', endColorstr='#"+ie_hex_last+"'":ie_old="startColorstr='#"+ie_hex_first+"', endColorstr='#"+ie_hex_last+"'",degree_pos=Math.round(na/45),0==degree_pos?old_webkit_hex="left top, right top, "+i:1==degree_pos?old_webkit_hex="left bottom, right top, "+i:2==degree_pos?old_webkit_hex="left top, left bottom, "+j:3==degree_pos?old_webkit_hex="left top, right bottom, "+j:4==degree_pos?old_webkit_hex="left top, right top, "+j:5==degree_pos?old_webkit_hex="left bottom, right top, "+j:6==degree_pos?old_webkit_hex="left top, left bottom, "+i:7==degree_pos?old_webkit_hex="left top, right bottom, "+i:old_webkit_hex="left top, right top, "+i,w3cdeg=Math.abs(na-450)%360,_css_hex="<div> <span class='b'>background</span>: <span class='r'>-moz-linear-gradient</span>("+na+"deg, "+h+");  <span class='cm'>/* ff3.6+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-webkit-gradient</span>(linear, "+old_webkit_hex+");  <span class='cm'>/* safari4+,chrome */</span> </div><div> <span class='b'>background</span>: <span class='r'>-webkit-linear-gradient</span>("+na+"deg, "+h+");  <span class='cm'>/* safari5.1+,chrome10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-o-linear-gradient</span>("+na+"deg, "+h+");  <span class='cm'>/* opera 11.10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-ms-linear-gradient</span>("+na+"deg, "+h+");  <span class='cm'>/* ie10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>linear-gradient</span>("+w3cdeg+"deg, "+h+");  <span class='cm'>/* w3c */</span> </div><div> <span class='b'>filter</span>: <span class='r'>progid:DXImageTransform.Microsoft.gradient</span>( "+ie_old+",GradientType="+ie_degree+" );  <span class='cm'>/* ie6-9 */</span> </div>"):_css_hex="<div> <span class='b'>background</span>: <span class='r'>-moz-radial-gradient</span>(center, ellipse cover, "+h+");  <span class='cm'>/* ff3.6+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-webkit-gradient</span>(radial, center center, 0px, center center, 100%, "+i+");  <span class='cm'>/* safari4+,chrome */</span> </div><div> <span class='b'>background</span>: <span class='r'>-webkit-radial-gradient</span>(center, ellipse cover, "+h+");  <span class='cm'>/* safari5.1+,chrome10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-o-radial-gradient</span>(center, ellipse cover, "+h+");  <span class='cm'>/* opera 11.10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>-ms-radial-gradient</span>(center, ellipse cover, "+h+");  <span class='cm'>/* ie10+ */</span> </div><div> <span class='b'>background</span>: <span class='r'>radial-gradient</span>(ellipse at center, "+h+");  <span class='cm'>/* w3c */</span> </div><div> <span class='b'>filter</span>: <span class='r'>progid:DXImageTransform.Microsoft.gradient</span>( startColorstr='#"+ie_hex_first+"', endColorstr='#"+ie_hex_last+"',GradientType="+ie_degree+" );  <span class='cm'>/* ie6-9 */</span> </div>",aa.html(_css_hex)}else if("android"==_){ie_hex_first=ha[0][1],aplha_hex_first=g(ha[0][2]);var k="",l="",m="";ie_hex_last=ha[len-1][1],aplha_hex_last=g(ha[len-1][2]),len>2&&(k="<span class='r'>android:centerX</span>=<span class='b'>\""+ha[1][0]+'%"</span> <br/>',m="<span class='r'>android:centerColor</span>=<span class='b'>\"#"+g(ha[1][2])+ha[1][1]+'"</span> <br/>'),deg=45*Math.round(na/45),_css_android="<div><span class='g'>&lt;shape</span> <span class='r'>xmlns:android</span>=<span class='b'>\"http://schemas.android.com/apk/res/android\"</span> <span class='r'>android:shape</span>=<span class='b'>\"rectangle\"</span> <span class='g'>&gt</span> </div> <span class='g'>&lt;gradient</span> <br/> <span class='r'>android:type</span>=<span class='b'>\"linear\"</span><br/> "+k+" <span class='r'>android:startColor</span>=<span class='b'>\"#"+aplha_hex_first+ie_hex_first+'"</span> <br/>'+m+" <span class='r'>android:endColor</span>=<span class='b'>\"#"+aplha_hex_last+ie_hex_last+"\"</span> <br/> <span class='r'>android:angle</span>=<span class='b'>\""+deg+"\"</span><span class='g'>/&gt</span><br/><div><span class='g'>&lt;/shape&gt</span></div>",_css_android+="<br/>-------------------------------------------------<br/>",k="<span class='r'>android:centerX</span>=<span class='b'>\"50%\"</span> <br/>",l="<span class='r'>android:centerY</span>=<span class='b'>\"50%\"</span> <br/>",_css_android+="<div><span class='g'>&lt;shape</span> <span class='r'>xmlns:android</span>=<span class='b'>\"http://schemas.android.com/apk/res/android\"</span> <span class='r'>android:shape</span>=<span class='b'>\"rectangle\"</span> <span class='g'>&gt</span> </div> <span class='g'>&lt;gradient</span> <br/> <span class='r'>android:type</span>=<span class='b'>\"radial\"</span><br/> "+k+l+" <span class='r'>android:startColor</span>=<span class='b'>\"#"+aplha_hex_first+ie_hex_first+'"</span> <br/>'+m+" <span class='r'>android:endColor</span>=<span class='b'>\"#"+aplha_hex_last+ie_hex_last+"\"</span> <br/>  <span class='r'>android:gradientRadius</span>=<span class='b'>\""+ha[1][0]+"\"</span><span class='g'>/&gt</span><br/> <div><span class='g'>&lt;/shape&gt</span></div>",aa.html(_css_android)}else if("canvas"==_){var n="",o=$("#canvas_w").val(),p=$("#canvas_h").val();for(U=0;U<len;U++)rgba="rgba("+c(ha[U][1])+","+d(ha[U][1])+","+e(ha[U][1])+","+ha[U][2]/100+")",n+=0==U?"<span class='r'>grad</span>.addColorStop("+ha[U][0]/100+", <span class='b'>'"+rgba+"'</span>);<br/>":"<span class='r'>grad</span>.addColorStop("+ha[U][0]/100+", <span class='b'>'"+rgba+"'</span>);<br/>";"l"==ma?(touchpoint=D(o,p,na),_css_canvas="<div> <span class='g'>&lt;canvas</span> <span class='r'>id</span>=<span class='b'>'canvas'</span> <span class='r'>width</span>=<span class='b'>'"+o+"'</span> <span class='r'>height</span>=<span class='b'>'"+p+"'</span> <span class='g'>&gt;&lt;/canvas&gt;</span> </div> <br/> <div><span class='g'> &lt;script&gt;</span> </div> <span class='g'>var</span> <span class='r'>canvas</span> = <span class='r'>document</span>.getElementById(<span class='b'>'canvas'</span>); <br/><span class='g'>var</span> <span class='r'>context</span> = <span class='r'>canvas</span>.getContext(<span class='b'>'2d'</span>); <br/> <span class='g'>var</span> <span class='r'>grad</span> = <span class='r'>context</span>.createLinearGradient("+touchpoint.x0+","+touchpoint.y0+","+touchpoint.x1+","+touchpoint.y1+");<br/><br/>"+n+"<br/><span class='r'>context</span>.fillStyle = <span class='r'>grad</span>;<br/><span class='r'>context</span>.fillRect(0, 0, "+o+","+p+"); <br/> <div> <span class='g'>&lt;/script&gt;</span> </div>"):(touchpoint=C(o,p),_css_canvas="<div> <span class='g'>&lt;canvas</span> <span class='r'>id</span>=<span class='b'>'canvas'</span> <span class='r'>width</span>=<span class='b'>'"+o+"'</span> <span class='r'>height</span>=<span class='b'>'"+p+"'</span> <span class='g'>&gt;&lt;/canvas&gt;</span> </div> <br/> <div> <span class='g'>&lt;script&gt;</span> </div> <span class='g'>var</span> <span class='r'>canvas</span> = <span class='r'>document</span>.getElementById(<span class='b'>'canvas'</span>); <br/><span class='g'>var</span> <span class='r'>context</span> = <span class='r'>canvas</span>.getContext(<span class='b'>'2d'</span>); <br/> <span class='g'>var</span> <span class='r'>grad</span> = <span class='r'>context</span>.createRadialGradient("+touchpoint.a+","+touchpoint.b+","+touchpoint.c+","+touchpoint.d+","+touchpoint.e+","+touchpoint.f+");<br/><br/>"+n+"<br/><span class='r'>context</span>.setTransform("+touchpoint.g+",0,0,"+touchpoint.h+",0,0);<br/><span class='r'>context</span>.fillStyle = <span class='r'>grad</span>;<br/><span class='r'>context</span>.fillRect(0, 0, "+touchpoint.i+","+touchpoint.j+"); <br/> <div> <span class='g'>&lt;/script&gt;</span> </div>"),aa.html(_css_canvas)}else if("svg"==_){var q="";for(U=0;U<len;U++)rgba="rgb("+c(ha[U][1])+","+d(ha[U][1])+","+e(ha[U][1])+")",pos=ha[U][0]/100,q+="<span class='g'>&lt;stop</span> <span class='r'>offset</span>=<span class='b'>\""+ha[U][0]+"%\"</span> <span class='r'>style</span>=<span class='b'>\"stop-color:"+rgba+";stop-opacity:"+ha[U][2]/100+"\"</span> <span class='g'>/&gt;</span><br/> ";"l"==ma?(touchpoint=D("100","100",na),_css_svg="<div><span class='g'>&lt;svg</span> <span class='r'>xmlns</span>=<span class='b'>\"http://www.w3.org/2000/svg\"</span> <span class='r'>width</span>=<span class='b'>\"200px\"</span> <span class='r'>height</span>=<span class='b'>\"200px\"</span> <span class='g'>&gt;</span> </div> <div> <span class='g'>&lt;defs&gt;</span> <br/> <span class='g'>&lt;linearGradient</span> <span class='r'>id</span>=<span class='b'>\"lgrad\"</span> <span class='r'>x1</span>=<span class='b'>\""+touchpoint.x0+"%\"</span> <span class='r'>y1</span>=<span class='b'>\""+touchpoint.y0+"%\"</span> <span class='r'>x2</span>=<span class='b'>\""+touchpoint.x1+"%\"</span> <span class='r'>y2</span>=<span class='b'>\""+touchpoint.y1+"%\"</span> <span class='g'>&gt;</span> <br/>"+q+" <span class='g'>&lt;/linearGradient&gt;</span> <br/> </div> <div> <span class='g'>&lt;/defs&gt;</span> </div> <div><span class='g'>&lt;rect</span> <span class='r'>x</span>=<span class='b'>\"0\"</span> <span class='r'>y</span>=<span class='b'>\"0\"</span> <span class='r'>width</span>=<span class='b'>\"100%\"</span> <span class='r'>height</span>=<span class='b'>\"100%\"</span> <span class='r'>fill</span>=<span class='b'>\"url(#lgrad)\"</span><span class='g'>/&gt;</span></div> <div><span class='g'>&lt;/svg&gt;</span></div>"):_css_svg="<div><span class='g'>&lt;svg</span> <span class='r'>xmlns</span>=<span class='b'>\"http://www.w3.org/2000/svg\"</span> <span class='r'>width</span>=<span class='b'>\"200px\"</span> <span class='r'>height</span>=<span class='b'>\"200px\"</span> <span class='g'>&gt;</span> </div> <div> <span class='g'>&lt;defs&gt;</span> <br/> <span class='g'>&lt;radialGradient</span> <span class='r'>id</span>=<span class='b'>\"rgrad\"</span>  <span class='r'>cx</span>=<span class='b'>\"50%\"</span> <span class='r'>cy</span>=<span class='b'>\"50%\"</span> <span class='r'>r</span>=<span class='b'>\"75%\"</span> &gt; <br/>"+q+" <span class='g'>&lt;/radialGradient&gt;</span> <br/> </div> <div> <span class='g'>&lt;/defs&gt;</span> </div> <div><span class='g'>&lt;rect</span> <span class='r'>x</span>=<span class='b'>\"0\"</span> <span class='r'>y</span>=<span class='b'>\"0\"</span> <span class='r'>width</span>=<span class='b'>\"100%\"</span> <span class='r'>height</span>=<span class='b'>\"100%\"</span> <span class='r'>fill</span>=<span class='b'>\"url(#rgrad)\"</span><span class='g'>/&gt;</span></div> <div><span class='g'>&lt;/svg&gt;</span></div>",aa.html(_css_svg)}else if("php"==_){var r=E("");_css_php="",_css_php+="<div><span class='b'>$gradient_array</span> = <span class='r'>array</span>(</div>",_css_php+=r,_css_php+="<div>);</div>",_css_php+="<div><span class='b'>$img_width</span> = 400;</div>",_css_php+="<div><span class='b'>$img_height</span> = 400;</div>","l"==ma?(_css_php+="<div><span class='b'>$rotation_degree</span> = "+na+";</div><br/>",aa.find(".php_r").hide(),aa.find(".php_l").show()):(aa.find(".php_r").show(),aa.find(".php_l").hide()),aa.find(".pre").html(_css_php)}}function G(){if("php"==_){var a="";a+="<div class='php_l'>",a+="<div><span class='r'>try</span>{</div><br/>",a+="<div><span class='b'>$im</span> = new <span class='r'>Imagick</span>();</div>",a+="<div><span class='b'>$glayer</span> = new <span class='r'>Imagick</span>();</div>",a+="<div><span class='b'>$degree_for_im</span> = 270 - <span class='b'>$rotation_degree</span>;</div><br/>",a+="<div><span class='b'>$im</span>-><span class='r'>newImage</span>( <span class='b'>$img_width</span>, <span class='b'>$img_height</span>, <span class='g'>'none'</span>, <span class='g'>'png'</span>);</div><br/>",a+="<div><span class='r'>for</span>(<span class='b'>$i</span>=1;<span class='b'>$i</span>&lt;<span class='r'>count</span>(<span class='b'>$gradient_array</span>);<span class='b'>$i</span>++){</div><br/>",a+="<span class='b'>$from</span> = (<span class='b'>$gradient_array</span>[<span class='b'>$i</span>-1][<span class='g'>'position'</span>]*<span class='b'>$img_height</span>)/100;<br/>",a+="<span class='b'>$to</span> = (<span class='b'>$gradient_array</span>[<span class='b'>$i</span>][<span class='g'>'position'</span>]*<span class='b'>$img_height</span>)/100;<br/><br/>",a+="<span class='b'>$height</span> = <span class='b'>$to</span> - <span class='b'>$from</span>;<br/><br/>",a+="<span class='b'>$glayer</span>-><span class='r'>newPseudoImage</span>(<span class='b'>$img_width</span>,<span class='b'>$height</span>,\"gradient:\".<span class='b'>$gradient_array</span>[<span class='b'>$i</span>-1]['rgba'].\"-\".<span class='b'>$gradient_array</span>[<span class='b'>$i</span>]['rgba']);<br/><br/>",a+="<span class='b'>$im</span>-><span class='r'>compositeImage</span>(<span class='b'>$glayer</span>,imagick::COMPOSITE_OVER, 0, <span class='b'>$from</span>);<br/>",a+="<div>}</div><br/>",a+="<div><span class='b'>$scale</span> = <span class='r'>abs</span>(<span class='r'>sin</span>(<span class='r'>deg2rad</span>(<span class='b'>$rotation_degree</span>))) + <span class='r'>abs</span>(<span class='r'>cos</span>(<span class='r'>deg2rad</span>(<span class='b'>$rotation_degree</span>)));</div>",a+="<div><span class='b'>$degrees</span> = <span class='r'>array</span>(<span class='b'>$scale</span>,<span class='b'>$degree_for_im</span>);</div>",a+="<div><span class='b'>$im</span>-><span class='r'>distortImage</span>(imagick::DISTORTION_SCALEROTATETRANSLATE, <span class='b'>$degrees</span>, false );</div><br/>",
a+="<div><span class='r'>header</span>( <span class='g'>\"Content-Type: image/png\"</span> );</div>",a+="<div><span class='r'>echo</span> <span class='b'>$im</span>;</div><br/>",a+="<div><span class='b'>$im</span>-><span class='r'>clear</span>();</div>",a+="<div><span class='b'>$im</span>-><span class='r'>destroy</span>();</div><br/>",a+="<div>}<span class='r'>catch</span>(<span class='r'>Exception</span> <span class='b'>$e</span>){</div>",a+="<span class='r'>echo</span> 'Error: ',  <span class='b'>$e</span>-><span class='r'>getMessage</span>(), \"\";<br/>",a+="<div>}</div>",a+="</div>",a+="<div class='php_r'><br/>",a+="<div><span class='r'>try</span>{</div><br/>",a+="<div><span class='b'>$im</span> = new <span class='r'>Imagick</span>();</div>",a+="<div><span class='b'>$glayer</span> = new <span class='r'>Imagick</span>();</div>",a+="<div><span class='b'>$im</span>-><span class='r'>newImage</span>( <span class='b'>$img_width</span>, <span class='b'>$img_height</span>, <span class='g'>'none'</span>, <span class='g'>'png'</span>);</div><br/>",a+="<div><span class='r'>for</span>(<span class='b'>$i</span>=1;<span class='b'>$i</span>&lt;<span class='r'>count</span>(<span class='b'>$gradient_array</span>);<span class='b'>$i</span>++){</div><br/>",a+="<span class='b'>$from</span> = (<span class='b'>$gradient_array</span>[<span class='b'>$i</span>-1][<span class='g'>'position'</span>]*<span class='b'>$img_height</span>)/100;<br/>",a+="<span class='b'>$to</span> = (<span class='b'>$gradient_array</span>[<span class='b'>$i</span>][<span class='g'>'position'</span>]*<span class='b'>$img_height</span>)/100;<br/><br/>",a+="<span class='b'>$height</span> = <span class='b'>$to</span> - <span class='b'>$from</span>;<br/><br/>",a+="<span class='b'>$glayer</span>-><span class='r'>newPseudoImage</span>(<span class='b'>$img_width</span>,<span class='b'>$height</span>,\"gradient:\".<span class='b'>$gradient_array</span>[<span class='b'>$i</span>-1]['rgba'].\"-\".<span class='b'>$gradient_array</span>[<span class='b'>$i</span>]['rgba']);<br/><br/>",a+="<span class='b'>$im</span>-><span class='r'>compositeImage</span>(<span class='b'>$glayer</span>,imagick::COMPOSITE_OVER, 0, <span class='b'>$from</span>);<br/>",a+="<div>}</div><br/>",a+="<div><span class='b'>$im</span>-><span class='r'>rotateImage</span>('transparent',180);</div>",a+="<div><span class='b'>$degrees</span> = <span class='r'>array</span>(360,0,<span class='b'>$img_width</span>,0);</div>",a+="<div><span class='b'>$im</span>-><span class='r'>distortImage</span>(Imagick::DISTORTION_ARC, <span class='b'>$degrees</span>, false );</div>",a+="<div><span class='b'>$d</span> = <span class='b'>$im</span>-><span class='r'>getImageGeometry</span>();</div>",a+="<div><span class='b'>$d</span>['width'] -= 2;</div>",a+="<div><span class='b'>$x_pos</span> = (<span class='b'>$d</span>['width']/2)/<span class='r'>sqrt</span>(2);</div>",a+="<div><span class='b'>$WW</span> = 2*<span class='b'>$x_pos</span>;</div>",a+="<div><span class='b'>$im</span>-><span class='r'>cropImage</span>(<span class='b'>$WW</span>,<span class='b'>$WW</span>,-<span class='b'>$x_pos</span>,-<span class='b'>$x_pos</span>);</div>",a+="<div><span class='b'>$im</span>-><span class='r'>ThumbnailImage</span>(<span class='b'>$img_width</span>,<span class='b'>$img_height</span>);</div><br/>",a+="<div><span class='r'>header</span>( <span class='g'>\"Content-Type: image/png\"</span> );</div>",a+="<div><span class='r'>echo</span> <span class='b'>$im</span>;</div><br/>",a+="<div><span class='b'>$im</span>-><span class='r'>clear</span>();</div>",a+="<div><span class='b'>$im</span>-><span class='r'>destroy</span>();</div><br/>",a+="<div>}<span class='r'>catch</span>(<span class='r'>Exception</span> <span class='b'>$e</span>){</div>",a+="<span class='r'>echo</span> 'Error: ',  <span class='b'>$e</span>-><span class='r'>getMessage</span>(), \"\";<br/>",a+="<div>}</div>",a+="</div>",aa.html("<div class='pre'></div><div class='post'>"+a+"</div>")}else aa.after("")}function H(a){Ea.theta=180-parseInt(a),$("#r_aro").rotate(Ea.theta),$("#deg_txt").val(a),$("#orientation").val(ma)}function I(){ha=[],tmp_g_stoper_t=[].concat(ia),tmp_g_stoper_b=[].concat(ja),R=tmp_g_stoper_t.length,S=tmp_g_stoper_b.length,tmp_g_stoper_t.sort(function(a,b){return a[0]-b[0]}),tmp_g_stoper_b.sort(function(a,b){return a[0]-b[0]}),U=R-1;do ha.push(new Array(tmp_g_stoper_t[U][0],"c",tmp_g_stoper_t[U][1]));while(U--);U=S-1;do q(ha,tmp_g_stoper_b[U][0])?ha[P][1]=tmp_g_stoper_b[U][1]:ha.push(new Array(tmp_g_stoper_b[U][0],tmp_g_stoper_b[U][1],"a"));while(U--);for(ha.sort(function(a,b){return a[0]-b[0]}),len=ha.length,ha[0][1]=tmp_g_stoper_b[0][1],ha[0][2]=tmp_g_stoper_t[0][1],ha[len-1][1]=tmp_g_stoper_b[S-1][1],ha[len-1][2]=tmp_g_stoper_t[R-1][1],U=0;U<len;U++){if("c"==ha[U][1]){for(V=U;V<len&&"c"==ha[V][1];V++);calc=(ha[U][0]-ha[U-1][0])/(ha[V][0]-ha[U-1][0]),g_arr_r=c(ha[U-1][1])+(c(ha[V][1])-c(ha[U-1][1]))*calc,g_arr_g=d(ha[U-1][1])+(d(ha[V][1])-d(ha[U-1][1]))*calc,g_arr_b=e(ha[U-1][1])+(e(ha[V][1])-e(ha[U-1][1]))*calc,calc=h(g_arr_r,g_arr_g,g_arr_b),ha[U][1]=calc}if("a"==ha[U][2]){for(V=U;V<len&&"a"==ha[V][2];V++);calc=(ha[V][2]-ha[U-1][2])*((ha[U][0]-ha[U-1][0])/(ha[U+1][0]-ha[U-1][0])),ha[U][2]=parseInt(ha[U-1][2])+parseInt(calc)}}}function J(a){ia=[],ja=[],ka=0,la=0;var b=a.split("&"),c=b[0].split(","),d=b[1].split(",");R=d.length,S=c.length,U=R-1;do p=d[U].split("_"),ia.push(new Array(p[0],p[1]));while(U--);U=S-1;do p=c[U].split("_"),ja.push(new Array(p[0],p[1]));while(U--);degtype=b[2].split("_"),ma=degtype[0],na=0,degtype[1]&&(na=degtype[1]),ie_degree=1,(na>45&&na<135||na>225&&na<315)&&(ie_degree=0),ia.sort(function(a,b){return a[0]-b[0]}),ja.sort(function(a,b){return a[0]-b[0]}),R>2&&$("#alpha_delete").removeAttr("disabled"),S>2&&$("#color_delete").removeAttr("disabled"),I(),x(ha[0][1]),y(),z(),A(),F(),H(na)}function K(){var a="";for(S=ja.length,U=0;U<S;U++)a+=ja[U][0]+"_"+ja[U][1]+",";for(a=a.slice(0,-1)+"&",R=ia.length,U=0;U<R;U++)a+=ia[U][0]+"_"+ia[U][1]+",";return a.slice(0,-1)+"&"+ma+"_"+na}function L(){var a=new Array([],[]);"l"==ma?a[0].push("linear",na,"farthest-side","center center","50","50"):a[0].push("radial",na,"farthest-side","center center","50","50");for(var b=0,f=ha.length;b<f;b++)alpha=ha[b][2]/100,rgba="rgba("+c(ha[b][1])+","+d(ha[b][1])+","+e(ha[b][1])+","+alpha+")",a[1].push([rgba,ha[b][0]]);return encodeURIComponent(JSON.stringify(a))}var M,N,O,P,Q,R,S,T={x:0,y:0},U=0,V=0,W=0,X=0,Y=0,Z=0,_="rgba",aa=$("#code_"),ba=$("#c_hue"),ca=$("#c_sat"),da=$("#c_lum"),ea=Math,fa=(ea.round,ea.min),ga=ea.max,ha=(ea.random,new Array),ia=new Array,ja=new Array,ka=0,la=0,ma="l",na=0;ie_degree=1;var oa=$("#m_col"),pa=$("#m_pt"),qa=$("#v_col"),ra=$("#v_pt"),sa=($("#r_center"),$("#s_bg"),{elem:pa,x:0,y:0,state:!1}),ta={elem:ra,y:0,state:!1},ua={state:!1},va={x:0,state:!1},wa={x:0,state:!1},xa=!0,ya=$("#m_col").offset(),za=$("#v_col").offset(),Aa=$("#r_center").offset(),Ba=$("#s_bg").offset(),Ca={t:ya.top,l:ya.left,h:ya.top+256,w:ya.left+256},Da={t:za.top,h:za.top+256},Ea={r:1,a:Aa.left-T.x,o:Aa.top-T.y,theta:0},Fa={l:Ba.left,w:Ba.left+450};$("#m_col").mousedown(function(){return sa.state||(sa.x=T.x-7,sa.y=T.y-7,T.x<Ca.l&&(sa.x=Ca.l-7),T.x>Ca.w&&(sa.x=Ca.w-7),Ca.t>T.y&&(sa.y=Ca.t-7),Ca.h<T.y&&(sa.y=Ca.h-7),sa.state=!0,$(sa.elem).offset({left:sa.x,top:sa.y}),ya=oa.offset(),hue=Math.round((sa.x-ya.left+7)/256*360),sat=Math.round(100-(sa.y-ya.top+7)/256*100),ba.val(hue),ca.val(sat),r()),!1}),$("#v_col").mousedown(function(){return ta.state||(ta.y=T.y-5,Da.t>T.y&&(ta.y=Da.t-5),Da.h<T.y&&(ta.y=Da.h-5),ta.state=!0,$(ta.elem).offset({top:ta.y}),lum=Math.round(100-(ta.y-za.top+5)/256*100),da.val(lum),t()),!1}),$("#r_bg").mousedown(function(){return ua.state||(Ea.a=Aa.left-T.x,Ea.o=Aa.top-T.y,Ea.theta=Math.round(Math.atan2(Ea.o,Ea.a)*(180/Math.PI)),ma="l",$("#orientation").val("l"),$("#r_aro").rotate(Ea.theta),Ea.theta=180-Ea.theta,$("#deg_txt").val(Ea.theta),na=Ea.theta,ie_degree=1,(na>45&&na<135||na>225&&na<315)&&(ie_degree=0),A(),F(),ua.state=!0),!1}),$(".cs_t").mousedown(function(){return xa&&(Fa.l=T.x-Ba.left-5,$(".cs_t .cs_tpt").removeClass("active"),t_alpha=$("#t_alpha").val(),pos=Math.round((Fa.l+5)/4.5),opacity=t_alpha/100,$("#t_loc").val(pos),addelement="<div class='cs_tpt active' style='left:"+Fa.l+"px' ><div style='background-color:black;opacity:"+opacity+";filter:alpha(opacity="+t_alpha+")'></div></div>",$(".cs_t").append(addelement),ka=ia.length,ia.push(new Array(pos,t_alpha)),2==ka&&$("#alpha_delete").removeAttr("disabled"),I(),A(),F()),va.state=!0,!1}),$(".cs_b").mousedown(function(){return xa&&(Fa.l=T.x-Ba.left-5,$(".cs_b .cs_bpt").removeClass("active"),colhex=$("#c_hex").val(),l=Number(Fa.l)+5,pos=Math.round(l/450*100),$("#b_loc").val(pos),addelement="<div class='cs_bpt active' style='left:"+Fa.l+"px' ><div style='background-color:#"+colhex+"' ></div></div>",$(".cs_b").append(addelement),la=ja.length,ja.push(new Array(pos,colhex)),2==la&&$("#color_delete").removeAttr("disabled"),I(),A(),F()),wa.state=!0,!1}),$(document).mousemove(function(a){T.x=a.pageX,T.y=a.pageY,sa.state&&(ya=oa.offset(),Ca.t=ya.top,Ca.l=ya.left,Ca.h=ya.top+256,Ca.w=ya.left+256,$(sa.elem).offset({left:sa.x,top:sa.y}),sa.x=T.x-7,sa.y=T.y-7,T.x<Ca.l&&(sa.x=Ca.l-7),T.x>Ca.w&&(sa.x=Ca.w-7),Ca.t>T.y&&(sa.y=Ca.t-7),Ca.h<T.y&&(sa.y=Ca.h-7),ba.val(Math.round((sa.x-ya.left+7)/256*360)),ca.val(Math.round(100-(sa.y-ya.top+7)/256*100)),r()),ta.state&&(za=$("#v_col").offset(),Da.t=za.top,Da.h=za.top+256,$(ta.elem).offset({top:ta.y}),ta.y=T.y-5,Da.t>T.y&&(ta.y=Da.t-5),Da.h<T.y&&(ta.y=Da.h-5),da.val(Math.round(100-(ta.y-za.top+5)/256*100)),t()),ua.state&&(Aa=$("#r_center").offset(),Ea.t=Aa.top,Ea.a=Aa.left-T.x,Ea.o=Aa.top-T.y,Ea.theta=Math.round(Math.atan2(Ea.o,Ea.a)*(180/Math.PI)),ma="l",$("#orientation").val("l"),$("#r_aro").rotate(Ea.theta),Ea.theta=180-Ea.theta,ie_degree=1,(na>45&&na<135||na>225&&na<315)&&(ie_degree=0),$("#deg_txt").val(Ea.theta),na=Ea.theta,F(),A()),va.state&&(ia.length>2&&T.y<300?(va.state=!1,$("#alpha_delete").trigger("click")):(Ba=$("#s_bg").offset(),Fa.l=Ba.left,Fa.w=Ba.left+450,va.x=T.x-5,Fa.l>T.x&&(va.x=Fa.l-5),Fa.w<T.x&&(va.x=Fa.w-5),$(".cs_t .active").offset({left:va.x}),l=$(".cs_t .active").css("left"),pos=Number(l.slice(0,-2))+5,pos=Math.round(pos/450*100),ia[ka][0]=pos,$("#t_loc").val(pos),I(),A(),F())),wa.state&&(ja.length>2&&T.y>600?(wa.state=!1,$("#color_delete").trigger("click")):(Ba=$("#s_bg").offset(),Fa.l=Ba.left,Fa.w=Ba.left+450,wa.x=T.x-5,Fa.l>T.x&&(wa.x=Fa.l-5),Fa.w<T.x&&(wa.x=Fa.w-5),$(".cs_b .active").offset({left:wa.x}),l=$(".cs_b .active").css("left"),pos=Number(l.slice(0,-2))+5,pos=Math.round(pos/450*100),ja[la][0]=pos,$("#b_loc").val(pos),I(),A(),F()))}),$(document).mouseup(function(){sa.state=!1,ta.state=!1,ua.state=!1,va.state=!1,wa.state=!1}),$(".cs_t").on("mouseout",".cs_tpt",function(){xa=!0}).on("mouseover",".cs_tpt",function(){xa=!1}).on("mousedown",".cs_tpt",function(){$(".cs_tpt").removeClass("active"),$(this).addClass("active");var a=$("div",this).css("opacity");a*=100,$("#t_alpha").val(a),l=$(this).css("left"),ka=$(".cs_tpt").index(this),I(),pos=Number(l.slice(0,-2))+5,pos=Math.round(pos/450*100),$("#t_loc").val(pos)}),$(".cs_b").on("mouseout",".cs_bpt",function(){xa=!0}).on("mouseover",".cs_bpt",function(){xa=!1}).on("mousedown",".cs_bpt",function(){$(".cs_bpt").removeClass("active"),$(this).addClass("active");var b=$("div",this).css("background-color");l=$(this).css("left"),la=$(".cs_bpt").index(this),I(),pos=Number(l.slice(0,-2))+5,pos=Math.round(pos/450*100),$("#b_loc").val(pos),hex=a(b),x(hex),hex="#"+hex,$("#b_col").val(hex)}),aa.dblclick(function(){b("code_")}),$("div.g_plate").on("click",".presetc",function(){Q=$(this).attr("g_str"),J(Q)}),$(".preset_a div").click(function(){al=$(this).attr("alpha_val"),ia[ka][1]=al,I(),y(),A(),F()}),$(".preset_c div").click(function(){var b=$(this).css("background-color");hex=a(b),ja[la][1]=hex,x(hex),I(),z(),A(),F()}),$("#alpha_delete").click(function(){a_len=ia.length,a_len>2&&(ia.splice(ka,1),ka=0,I(),y(),A(),F(),3==a_len&&$("#alpha_delete").attr("disabled","disabled"))}),$("#color_delete").click(function(){b_len=ja.length,b_len>2&&(ja.splice(la,1),la=0,I(),z(),A(),F(),3==b_len&&$("#color_delete").attr("disabled","disabled"))}),$("#orientation").on("change",function(){ma=$(this).val(),A(),F()}),$("#t_alpha").on("keyup",function(){al=$(this).val(),al>100&&(al=100,$(this).val(100)),ia[ka][1]=al,I(),y(),A(),F()}),$("#t_loc").on("keyup",function(){al=$(this).val(),al>100&&(al=100,$(this).val(100)),ia[ka][0]=al,I(),y(),A(),F()}),$("#b_col").on("keyup",function(){var a=/^(#[A-Fa-f0-9]{6})|([A-Fa-f0-9]{6})$/;al=$(this).val(),a.test(al)&&(6==al.length&&(al="#"+al),al=al.substr(1,6),ja[la][1]=al,x(al),I(),z(),A(),F())}),$("#c_hex").on("keyup",function(){var a=/^(#[A-Fa-f0-9]{6})|([A-Fa-f0-9]{6})$/;al=$(this).val(),a.test(al)&&(6==al.length&&(al="#"+al),al=al.substr(1,6),ja[la][1]=al,x(al),I(),z(),A(),F())}),$("#b_loc").on("keyup",function(){al=$(this).val(),al>100&&(al=100,$(this).val(100)),ja[la][0]=al,I(),z(),A(),F()}),$("#c_hue").on("keyup",function(){al=$(this).val(),al>360&&(al=360,$(this).val(360)),u(al),r()}),$("#c_sat").on("keyup",function(){al=$(this).val(),al>100&&(al=100,$(this).val(100)),v(al),r()}),$("#c_lum").on("keyup",function(){al=$(this).val(),al>100&&(al=100,$(this).val(100)),w(al),t()}),$("#c_red").on("keyup",function(){al=$(this).val(),al>255&&(al=255,$(this).val(255)),s()}),$("#c_green").on("keyup",function(){al=$(this).val(),al>255&&(al=255,$(this).val(255)),s()}),$("#c_blue").on("keyup",function(){al=$(this).val(),al>255&&(al=255,$(this).val(255)),s()}),$("#deg_txt").on("keyup",function(){al=$(this).val(),al>360&&(al=360,$(this).val(360)),na=""==al?0:al,ie_degree=1,(na>45&&na<135||na>225&&na<315)&&(ie_degree=0),ma="l",H(al),A(),F()}),$("#canvas_h").on("keyup",function(){F()}),$("#canvas_w").on("keyup",function(){F()}),$("#addgradient").click(function(){var a="",b="",f="",g="",h="";for(len=ha.length,U=0;U<len;U++)alpha=ha[U][2]/100,rgba="rgba("+c(ha[U][1])+","+d(ha[U][1])+","+e(ha[U][1])+","+alpha+")",0==U?(ie_hex_first=ha[U][1],f+="color-stop("+ha[U][0]+"%, "+rgba+")",g+="color-stop("+ha[U][0]+"%, #"+ha[U][1]+")",h+="color-stop("+(100-ha[U][0])+"%, "+rgba+")",a+=rgba+" "+ha[U][0]+"%",b+="#"+ha[U][1]+" "+ha[U][2]+"%"):(f+=", color-stop("+ha[U][0]+"%, "+rgba+")",g+=", color-stop("+ha[U][0]+"%, #"+ha[U][1]+")",h="color-stop("+(100-ha[U][0])+"%, "+rgba+"), "+h,a+=", "+rgba+" "+ha[U][0]+"%",b+=", #"+ha[U][1]+" "+ha[U][2]+"%");ie_hex_last=ha[len-1][1],"l"==ma?(degree_pos=Math.round(na/90),0==degree_pos?ie_old='startColorstr="#'+ie_hex_first+'", endColorstr="#'+ie_hex_last+'"':1==degree_pos?ie_old='startColorstr="#'+ie_hex_last+'", endColorstr="#'+ie_hex_first+'"':2==degree_pos?ie_old='startColorstr="#'+ie_hex_last+'", endColorstr="#'+ie_hex_first+'"':3==degree_pos?ie_old='startColorstr="#'+ie_hex_first+'", endColorstr="#'+ie_hex_last+'"':ie_old='startColorstr="#'+ie_hex_first+'", endColorstr="#'+ie_hex_last+'"',degree_pos=Math.round(na/45),0==degree_pos?old_webkit_rgba="left top, right top, "+f:1==degree_pos?old_webkit_rgba="left bottom, right top, "+f:2==degree_pos?old_webkit_rgba="left top, left bottom, "+h:3==degree_pos?old_webkit_rgba="left top, right bottom, "+h:4==degree_pos?old_webkit_rgba="left top, right top, "+h:5==degree_pos?old_webkit_rgba="left bottom, right top, "+h:6==degree_pos?old_webkit_rgba="left top, left bottom, "+f:7==degree_pos?old_webkit_rgba="left top, right bottom, "+f:old_webkit_rgba="left top, right top, "+f,w3cdeg=Math.abs(na-450)%360,_css_rgba="background: -moz-linear-gradient("+na+"deg, "+a+");background: -webkit-gradient(linear, "+old_webkit_rgba+");background: -webkit-linear-gradient("+na+"deg, "+a+");background: -o-linear-gradient("+na+"deg, "+a+");background: -ms-linear-gradient("+na+"deg, "+a+");background: linear-gradient("+w3cdeg+"deg, "+a+");filter: progid:DXImageTransform.Microsoft.gradient("+ie_old+",GradientType="+ie_degree+" );"):_css_rgba="background: -moz-radial-gradient(center, ellipse cover, "+a+");background: -webkit-gradient(radial, center center, 0px, center center, 100%, "+f+");background:-webkit-radial-gradient(center, ellipse cover, "+a+");background: -o-radial-gradient(center, ellipse cover, "+a+");background: -ms-radial-gradient(center, ellipse cover, "+a+");background:radial-gradient(ellipse at center, "+a+');filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="#'+ie_hex_first+'", endColorstr="#'+ie_hex_last+'",GradientType='+ie_degree+" ); ",ulinkstr=K(),addelement="<div class='preset'><div class='presetc' g_str='"+ulinkstr+"' style='"+_css_rgba+"' ></div></div>",$(".g_plate").prepend(addelement)}),$("#ulink").hover(function(){ulinkstr="?"+K(),$(this).attr("href",ulinkstr)}),$("#exportbtn").click(function(){ulinkstr="image.php?"+K(),ulinkstr2="../css-generator/gradient/?"+L(),$("#gtoimg").attr("href",ulinkstr),$("#gtocssgen").attr("href",ulinkstr2)}),$("#rev_stoper").click(function(){R=ia.length,S=ja.length,U=R-1;do ia[U][0]=100-ia[U][0];while(U--);U=S-1;do ja[U][0]=100-ja[U][0];while(U--);I(),y(),z(),A(),F()}),$("div.tab span.tab_head").click(function(){_=$(this).data("name"),$("div.tab span.tab_head").addClass("hide"),$("#tab_"+_).removeClass("hide"),$("div.wmsg div").hide(),$("#msg_"+_).show(),G(),F()}),sPageURL=window.location.search.substring(1),J(""!=sPageURL?sPageURL:"0_99DAFF,100_008080&0_100,100_100&l_45")});
